<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Dividend Screener – Baseline</title>

  <link rel="stylesheet"
        href="https://cdn.datatables.net/1.13.8/css/jquery.dataTables.min.css">

  <script src="https://code.jquery.com/jquery-3.7.1.min.js"></script>
  <script src="https://cdn.datatables.net/1.13.8/js/jquery.dataTables.min.js"></script>
</head>
<body>

<h2>Dividend Screener – Baseline</h2>

<table id="screener" class="display" style="width:100%">
  <thead>
    <tr>
      <th>Ticker</th>
      <th>Name</th>
      <th>Country</th>
      <th>Sector</th>
      <th>Industry</th>
      <th>Price</th>
      <th>Dividend Yield (%)</th>
      <th>Payout Ratio (%)</th>
      <th>PE</th>
    </tr>
  </thead>
  <tbody></tbody>
</table>

<script>
fetch("data/screener_results.csv")
  .then(res => res.text())
  .then(text => {
    const lines = text.trim().split("\n");
    const headers = lines.shift().split(",");

    const rows = lines.map(line => {
      const cols = line.split(",");
      let row = {};
      headers.forEach((h, i) => row[h] = cols[i]);
      return row;
    });

    $('#screener').DataTable({
      data: rows,
      columns: [
        { data: "Ticker" },
        { data: "Name" },
        { data: "Country" },
        { data: "Sector" },
        { data: "Industry" },
        { data: "Price" },
        { data: "DividendYield_%" },
        { data: "PayoutRatio_%" },
        { data: "PE" }
      ]
    });
  })
  .catch(err => {
    console.error("CSV LOAD ERROR:", err);
  });
</script>

</body>
</html>
