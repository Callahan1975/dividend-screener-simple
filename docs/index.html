<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Dividend Screener – DGI</title>
<link rel="stylesheet" href="https://cdn.datatables.net/1.13.8/css/jquery.dataTables.min.css">
<style>
body{font-family:-apple-system,Arial;margin:32px}
.filters select{margin-right:8px;padding:6px}
.signal-BUY{color:#1a7f37;font-weight:700}
.signal-HOLD{color:#b8860b;font-weight:700}
.signal-AVOID{color:#b42318;font-weight:700}
</style>
</head>

<body>
<h1>Dividend Screener – DGI</h1>
<p id="gen"></p>

<div class="filters">
<select id="fClass"><option value="">All Classes</option><option>King</option><option>Aristocrat</option><option>Contender</option></select>
<select id="fRegion"><option value="">All Regions</option><option>US</option><option>DK</option><option>SE</option><option>NL</option><option>CA</option></select>
<select id="fSignal"><option value="">All Signals</option><option>BUY</option><option>HOLD</option><option>AVOID</option></select>
</div>

<table id="tbl" class="display" style="width:100%">
<thead>
<tr>
<th>Ticker</th><th>Name</th><th>Region</th><th>Class</th>
<th>Yield</th><th>CAGR 3Y</th><th>CAGR 5Y</th>
<th>Payout</th><th>Confidence</th><th>Signal</th>
</tr>
</thead>
</table>

<script src="https://code.jquery.com/jquery-3.7.1.min.js"></script>
<script src="https://cdn.datatables.net/1.13.8/js/jquery.dataTables.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/papaparse@5.4.1/papaparse.min.js"></script>

<script>
Papa.parse("data/screener_results/screener_results.csv",{
download:true,header:true,complete:r=>{
const d=r.data.filter(x=>x.Ticker);
$("#gen").text("Generated: "+d[0].GeneratedUTC);

const t=$("#tbl").DataTable({
data:d,
order:[[8,"desc"],[6,"desc"],[4,"desc"]],
columns:[
{data:"Ticker"},
{data:"Name"},
{data:"Region"},
{data:"DividendClass"},
{data:"DividendYield"},
{data:"DivCAGR_3Y"},
{data:"DivCAGR_5Y"},
{data:"PayoutRatio"},
{data:"Confidence"},
{data:"Signal",render:v=>`<span class="signal-${v}">${v}</span>`}
]
});

$("#fClass").on("change",()=>t.column(3).search(fClass.value).draw());
$("#fRegion").on("change",()=>t.column(2).search(fRegion.value).draw());
$("#fSignal").on("change",()=>t.column(9).search(fSignal.value).draw());
}});
</script>
</body>
</html>
