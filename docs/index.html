<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Dividend Screener – Decision View</title>

<link rel="stylesheet" href="https://cdn.datatables.net/1.13.6/css/jquery.dataTables.min.css">

<style>
body {
    font-family: system-ui, -apple-system, BlinkMacSystemFont;
    margin: 20px;
}

h1 { margin-bottom: 6px; }

.filters {
    margin: 12px 0 16px 0;
    display: flex;
    gap: 12px;
    flex-wrap: wrap;
}

select { padding: 4px 6px; }

.badge {
    padding: 3px 8px;
    border-radius: 10px;
    font-size: 12px;
    font-weight: 600;
}

.GOLD { background: gold; }
.BUY { background: #8fd18f; }
.HOLD { background: #ddd; }
.WATCH { background: #f3bcbc; }

.High { background: #9be59b; }
.Medium { background: #ffd36e; }
.Low { background: #ff9b9b; }
</style>
</head>

<body>

<h1>Dividend Screener – Decision View</h1>
<div style="font-size:13px;color:#666">
Live data from <code>data/screener_results/screener_decision.csv</code>
</div>

<div class="filters">
    <label>Signal:
        <select id="signalFilter"><option value="">All</option></select>
    </label>
    <label>Confidence:
        <select id="confFilter"><option value="">All</option></select>
    </label>
    <label>Country:
        <select id="countryFilter"><option value="">All</option></select>
    </label>
    <label>Sector:
        <select id="sectorFilter"><option value="">All</option></select>
    </label>
</div>

<table id="screener" class="display" style="width:100%">
<thead>
<tr>
    <th>Ticker</th>
    <th>Name</th>
    <th>Country</th>
    <th>Sector</th>
    <th>Currency</th>
    <th>Price</th>
    <th>Yield %</th>
    <th>DivCAGR(5Y)</th>
    <th>Score</th>
    <th>Signal</th>
    <th>Conf</th>
    <th>Why</th>
</tr>
</thead>
</table>

<script src="https://code.jquery.com/jquery-3.7.0.min.js"></script>
<script src="https://cdn.datatables.net/1.13.6/js/jquery.dataTables.min.js"></script>

<script>
const DATA_URL = "data/screener_results/screener_decision.csv";

$(async function () {

const res = await fetch(DATA_URL);
const text = await res.text();
const lines = text.trim().split("\n");
const headers = lines[0].split(",");

const rows = lines.slice(1).map(r => {
    const vals = r.split(",");
    return Object.fromEntries(headers.map((h,i)=>[h, vals[i] ?? ""]));
});

const table = $('#screener').DataTable({
    data: rows,
    pageLength: 50,
    columns: [
        { data: "Ticker" },
        { data: d => d.Name || d.Company || d
